<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="msapplication-config" content="/browserconfig.xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"keli.hu","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Remember to always be yourself. Unless you suck.">
<meta property="og:type" content="website">
<meta property="og:title" content="Keli&#39;s Mumbo Jumbo">
<meta property="og:url" content="https://keli.hu/index.html">
<meta property="og:site_name" content="Keli&#39;s Mumbo Jumbo">
<meta property="og:description" content="Remember to always be yourself. Unless you suck.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Keli">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://keli.hu/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Keli's Mumbo Jumbo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Keli's Mumbo Jumbo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Small aim is a crime, have great aim.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/keli" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/python-blpapi-on-mac-os/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/python-blpapi-on-mac-os/" class="post-title-link" itemprop="url">Python blpapi on Mac OS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-08 20:44:28" itemprop="dateCreated datePublished" datetime="2020-12-08T20:44:28+08:00">2020-12-08</time>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>To install blpapi library for python on Mac OS, first download the <a target="_blank" rel="noopener" href="https://www.bloomberg.com/professional/support/api-library/">C++ sdk from bloomberg</a>.</p>
<p>Then unpack the tarball to a path you prefer. Take <code>/usr/local</code> for example:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">sudo tar xfv ~/Downloads/blpapi_cpp_3.15.0.1-macos.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> create a symlink to make future updates a bit easier</span></span><br><span class="line">sudo ln -s blpapi_cpp_3.15.0.1 blpapi</span><br></pre></td></tr></table></figure>
<p>Next, try installing blpapi for python with pip, with env variable <code>BLPAPI_ROOT</code> pointing to the C++ sdk's path.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BLPAPI_ROOT=/usr/local/blpapi pip install --index-url=https://bloomberg.bintray.com/pip/simple --upgrade blpapi</span><br></pre></td></tr></table></figure>
<p>If you have the lastest xcode CLT installed, you might see a compiler error though:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">blpapi/internals_wrap.c:20050:19: error: implicit declaration of function &#x27;blpapi_ZfpUtil_getOptionsForLeasedLines&#x27; is invalid in C99</span><br><span class="line">      [-Werror,-Wimplicit-function-declaration]</span><br><span class="line">    result = (int)blpapi_ZfpUtil_getOptionsForLeasedLines(arg1,(struct blpapi_TlsOptions const *)arg2,arg3);</span><br><span class="line">                  ^</span><br></pre></td></tr></table></figure>
<p>In this case, you have to fix the error first, goto bintray and download the python source tarball, then unpack it.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Downloads</span><br><span class="line">wget https://bloomberg.bintray.com/pip/simple/blpapi/blpapi-3.15.2.tar.gz</span><br><span class="line">tar xfv blpapi-3.15.2.tar.gz</span><br><span class="line">cd blpapi-3.15.2</span><br></pre></td></tr></table></figure>
<p>A quick search in the C++ sdk shows that the header file that defines the function in question is not included, just open <code>blpapi/internals_wrap.c</code> in the python source directory and add a line to include the header file will fix the error.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;blpapi_zfputil.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>Then proceed to install:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<p>That should be it! For much older versions I had to modify the generated _internal.so using <code>install_name_tool -change</code> to help locate libblpapi3.so, which was not as pleasant an experience. Fortunately the newer versions have fixed the issue. It's worth mentioning that the installation on Linux is basically the same, with only one additional step to help locate libblpapi3.so, either by copying the file to <code>/lib/</code> or add the path of C++ sdk to ld.so.conf.</p>
<p>Hope this helps.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/vncserver-without-x/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/vncserver-without-x/" class="post-title-link" itemprop="url">Vncserver Without X</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-04 21:13:34" itemprop="dateCreated datePublished" datetime="2017-09-04T21:13:34+08:00">2017-09-04</time>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>The most light-weight setup, to have a long-running GUI application on Linux server, is to simply use a vncserver, then run the application after connected to the vncserver. This way you don't have to install many of the X11-related packages, and memory footprint is considerably smaller.</p>
<p>Step 1: Install vncserver and a window manager of your choosing (I use icewm).</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install xterm xfonts-base xfonts-scalable tightvncserver icewm sakura</span><br></pre></td></tr></table></figure>
<p>Where sakura is a light-weight terminal emulator that I prefer.</p>
<p>Step 2: Create init files for vncserver session.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir .vnc</span><br><span class="line">cat &gt; /.vnc/xstartup &lt;&lt;EOF</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">xrdb \<span class="variable">$HOME</span>/.Xresources</span><br><span class="line"><span class="built_in">exec</span> /etc/X11/Xsession</span><br><span class="line">EOF</span><br><span class="line">chmod +x .vnc/xstartup</span><br></pre></td></tr></table></figure>
<p>You could also create a vnc password by running <code>vncpasswd</code>.</p>
<p>Step 3: Run vncserver</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver :1 -depth 24 -geometry 1280x800 -localhost -interface lo -nolisten tcp</span><br></pre></td></tr></table></figure>
<p>Vncserver will listen on localhost:5901, and you're pretty much done at the server side. You could also make it a systemd service instead:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sudo tee /etc/systemd/system/vncserver@.service &lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Remote desktop service (VNC)</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=your_user</span><br><span class="line">Group=your_group</span><br><span class="line">WorkingDirectory=/home/your_user</span><br><span class="line">PIDFile=/home/your_user/.vnc/%H:%i.pid</span><br><span class="line">ExecStartPre=-/usr/bin/vncserver -<span class="built_in">kill</span> :%i &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">ExecStart=/usr/bin/vncserver :%i -depth 24 -geometry 1280x800 -localhost -interface lo -nolisten tcp</span><br><span class="line">ExecStop=/usr/bin/vncserver -<span class="built_in">kill</span> :%i</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> vncserver@1.service</span><br><span class="line">systemctl start vncserver@1.service</span><br></pre></td></tr></table></figure>
<p>To connect to the vncserver, you'll need to forward the vnc connection to localhost:5091 on the server side via a ssh tunnel:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 5901:localhost:5901 -C -N server_ip</span><br></pre></td></tr></table></figure>
<p>On Mac OS, I recommend <a target="_blank" rel="noopener" href="https://www.opoet.com/pyro/index.php">Secure Pipes</a> which is a great tool for managing multiple tunnels and keeping connections alive.</p>
<p>Now use any vnc client and connect to <code>localhost:5901</code>, you'll be connected to the vncserver. On Mac OS, simply launch Screen Sharing from spotlight, it's a fairly good vnc client.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/mrtg-nginx-on-debian-squeeze-with-1-minute-interval/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/mrtg-nginx-on-debian-squeeze-with-1-minute-interval/" class="post-title-link" itemprop="url">Mrtg + Nginx On Debian Squeeze with 1 minute interval</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-02-22 23:51:00" itemprop="dateCreated datePublished" datetime="2012-02-22T23:51:00+08:00">2012-02-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Systems/" itemprop="url" rel="index"><span itemprop="name">Systems</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Quick note really:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install nginx, mrtg, and fcgiwrap to wrap mrtg cgi since nginx doesn&#x27;t support cgi directly</span></span><br><span class="line">sudo apt-get install nginx mrtg mrtg-rrd rrdtool librrds-perl fcgiwrap</span><br><span class="line"></span><br><span class="line"><span class="comment"># prepare directories</span></span><br><span class="line">sudo mkdir -p /var/www/mrtg /var/<span class="built_in">log</span>/mrtg</span><br><span class="line">sudo chown -R www-data.  /var/www/mrtg /var/<span class="built_in">log</span>/mrtg</span><br><span class="line">sudo -u www-data cp /usr/share/mrtg/* /var/www/mrtg<span class="comment"># prepare the cron job, 1 minute interval is used</span></span><br><span class="line">sudo sh -c <span class="string">&#x27;echo &quot;* * * * * www-data if [ -x /usr/bin/mrtg ] &amp;&amp; [ -r /etc/mrtg.cfg ]; then mkdir -p /var/log/mrtg ; env LANG=C /usr/bin/mrtg /etc/mrtg.cfg 2&gt;&amp;1 | tee -a /var/log/mrtg/mrtg.log ; fi&quot; &gt; /etc/cron.d/mrtg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate config</span></span><br><span class="line">sudo sh -c <span class="string">&quot;cfgmaker --global &#x27;Interval: 1&#x27; --global &#x27;LogFormat: rrdtool&#x27; --global &#x27;IconDir: /mrtg&#x27; 10.0.12.254  /etc/mrtg.cfg&quot;</span></span><br><span class="line">sudo rm -rf /var/lock/mrtg/</span><br><span class="line"></span><br><span class="line"><span class="comment">### edit /etc/nginx/sites-enabled/default and include /usr/share/doc/fcgiwrap/examples/nginx.conf</span></span><br><span class="line">sudo service nginx reload</span><br></pre></td></tr></table></figure>
<p>Then visit http://localhost/cgi-bin/mrtg-rrd.cgi/ for the graph</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/furion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/furion/" class="post-title-link" itemprop="url">Furion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-01-29 01:54:00" itemprop="dateCreated datePublished" datetime="2012-01-29T01:54:00+08:00">2012-01-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Furion is an encrypted proxy (SOCKS5 + SSL) written in Python. I've written it to help myself get over the Great Firewall of... you know where.</p>
<p>It has no external dependencies other than a standard Python 2.x (&gt;2.5) installation. The advantages of Furion vs a SSH Socks5 proxy are:</p>
<ul>
<li>You don't need to reconnect if something happens and your network breaks for a while (e.g. put your laptop to sleep/standby)</li>
<li>Easier to manage/share accounts</li>
<li>Better security, it only allows proxy to destination port 80/443, and prevents DNS leak by not allowing using IP address as destination in the protocol.</li>
<li>Can easily use other Furion server as upstream, making a chain of proxies.</li>
</ul>
<p>Here is how I use it: I run a copy of Furion on a small VPS box of mine in the US, configured as server (with SSL and authentication turned on), and on my desktop I run Furion configured as client, with SSL and authentication off,  and using my VPS as upstream proxy. This way I can configure my browser to use the local Furion as socks5 proxy and visit any website that my VPS can reach. It's pretty cheap to buy a low-end VPS nowadays (I personally have a few $15/year ones), plus you can share with your friends too once you get it working. Here is a simple diagram showing how it works:</p>
<pre class="mermaid" style="text-align: center; background: transparent;">
            graph TD
            Browser--socks5-->FC(Furion Client);
FC--socks5 + ssl-->GFW(The Great Firewall);
GFW-->FS(Furion Server);
FS-->WS(Web Site);
WS-->FS;
FS--socks5 + ssl-->GFW;
GFW-->FC;
FC(Furion Client)--socks5-->Browser;
          </pre>
<p>Firefox and Chrome have extensions that can auto switch to use a proxy when visiting a banned URL (e.g. <a target="_blank" rel="noopener" href="https://addons.mozilla.org/en-us/firefox/addon/autoproxy/">autoproxy</a> for FireFox and <a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/dpplabbmogkhghncfbfdeeokoefdjegm">SwitchySharp</a> for Chrome), which make this much easier to use for the purpose.</p>
<p>Code is in a HG repo on <a target="_blank" rel="noopener" href="http://hg.keli.hu/furion">bitbucket</a>. No GUI yet, just a plain console program, and all settings are done in configuration file: furion.cfg. There are two cfg examples in the examples directory. There is also an executable for Windows configured to use my VPS as upstream that should be ready for immediate use. <strong>Don't abuse this or it might be taken down anytime</strong>. Download the windows executable <a target="_blank" rel="noopener" href="http://hg.keli.hu/furion/downloads/">here</a>. By default it listens on 127.0.0.1 port 11080. Set that as socks5 proxy address in your browser and you are good to go.</p>
<p><strong>A few caveats:</strong></p>
<ol type="1">
<li>Many recent versions of Internet Explorer don't have SOCKS5 support at all. Firefox/Chrome are recommended instead, you will want to use one of the automatic proxy switching extensions mentioned above anyway.</li>
<li>FireFox users need to set <strong>network.proxy.socks_remote_dns</strong> to true in about:config, otherwise Furion would refuse connections. This is done by design to avoid DNS poisoning.</li>
<li>When running Furion server, you need a pem file for SSL encryption, I have put one in the examples directory for convenience, but keep in mind it's not safe to use that same pam file, generate your own pem file instead if you care.</li>
<li>To enable authentication for Furion server, you need a simpleauth.passwd and write username/password in it. An example is also available in the examples directory in source tree.</li>
<li>On a OpenVZ VPS with small memory (256M or less), you probably want to set a smaller stack size than default, like "ulimit -s 256", to reduce memory usage, or Furion could have problem when allocating many new threads.</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/101domain-is-a-scam/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/101domain-is-a-scam/" class="post-title-link" itemprop="url">101domain is a scam</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2010-08-30 11:46:00" itemprop="dateCreated datePublished" datetime="2010-08-30T11:46:00+08:00">2010-08-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Misc/" itemprop="url" rel="index"><span itemprop="name">Misc</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I was trying to register a domain with the .ms extension. 101domain.com was ranked the 1st place in the google search for “.ms domain registration” (turns out 101domain.com does a great SEO job and is ranked the first place for a lot of registrar related search terms). So I registered the domain name I wanted there and paid, then I found out the domain status in my account page was “Sent to registry, pending create”. I thought that .ms might had some restrictions and waited for 4 days. Nothing happened. I then submitted a supported ticket and waited for another 36 hours, again nothing happened, no reply, nothing. So I tried registering the same .ms domain name at another registrar that I read about during my searches, guess what, instant success! I can use the domain name immediately after payment. I couldn’t believe it. Now I’m requesting for a refund from 101domain, see how that goes (I have a bad feeling about this though, probably will have to file a dispute with paypal or even ask my bank to charge back).</p>
<p>In short, 101domain is a scam, avoid at all costs.</p>
<p>Update: They did refund me within 48 hours though, after I filed a dispute via paypal and threatened to ask my bank to charge back.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/how-to-setup-apt-and-centos-repository-on-rhel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/how-to-setup-apt-and-centos-repository-on-rhel/" class="post-title-link" itemprop="url">How to setup apt and CentOS repository on RHEL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2008-08-05 22:46:00" itemprop="dateCreated datePublished" datetime="2008-08-05T22:46:00+08:00">2008-08-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Systems/" itemprop="url" rel="index"><span itemprop="name">Systems</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Earlier today someone asked me to help with installing typical apache/mysql/php combo on a Linux server. After logging in I found that the distro is RHEL4. Obviously yum is not available there... as shitty as yum is, it's still better than the infamous rpm hell, right? So I decided to install yum. After downloading a yum rpm, it failed to install because a bunch of dependencies were not met. "Hell," I started to wonder, "if I have to go through this why not install apt for what it's worth?"</p>
<p>Then I googled a bit and made apt work. In order to install mysql-server and php-mysql I also had to use CentOS's repository. Here is what I did:</p>
<ul>
<li><p>Download &amp; install the apt rpm package from<br />
http://dag.wieers.com/packages/apt</p></li>
<li><p>(Optional) Download &amp; install the rpmforge package from<br />
http://dag.wieers.com/packages/rpmforge-release</p></li>
<li><p>Import CentOS 4 PGP key:</p>
<p>rpm --import http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-4</p></li>
<li><p>Add CentOS 4 repository to apt sources list by editing /etc/apt/sources.list.d/os.list and uncomment the lines about mirror.centos.org. You can also change the url to a mirror closer to you, mine looks like this:</p></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">repomd http://ftp.nara.wide.ad.jp/pub/Linux/centos/$(VERSION)/os/$(ARCH)  </span><br><span class="line">repomd http://ftp.nara.wide.ad.jp/pub/Linux/centos/$(VERSION)/updates/$(ARCH)  </span><br><span class="line">repomd http://ftp.nara.wide.ad.jp/pub/Linux/centos/$(VERSION)/extras/$(ARCH)  </span><br><span class="line">repomd http://ftp.nara.wide.ad.jp/pub/Linux/centos/$(VERSION)/fasttrack/$(ARCH)  </span><br></pre></td></tr></table></figure>
<p>if you want to install mysql 5 and php 5 (4 by default), you can also add a line for centosplus:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repomd http://ftp.nara.wide.ad.jp/pub/Linux/centos/$(VERSION)/centosplus/$(ARCH)</span><br></pre></td></tr></table></figure>
<p>Now you can use your normal apt commands like apt-get update &amp;&amp; apt-get install. Sweeeet!</p>
<p>For third-party repositories you can also use <a target="_blank" rel="noopener" href="http://atrpms.net/install.html">atrpms.net</a> repo.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/proxy-for-ssh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/proxy-for-ssh/" class="post-title-link" itemprop="url">Proxy for SSH</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2006-10-09 00:28:00" itemprop="dateCreated datePublished" datetime="2006-10-09T00:28:00+08:00">2006-10-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Systems/" itemprop="url" rel="index"><span itemprop="name">Systems</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Sometimes I need to ssh to my servers back at school when working in the company; Since the corporate proxy servers support HTTPS and don't block connections to port 22, ssh over proxy is possible, and here is what I did to make it work:</p>
<ul>
<li>Install connect-proxy: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install connect-proxy</span><br></pre></td></tr></table></figure> The debian package description is pretty clear in describing its functions: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Description: Establish TCP connection using SOCKS4/5 and HTTP tunnelconnect-proxy is a simple relaying <span class="built_in">command</span> to make TCP network connectionvia SOCKS or https proxies.It is mainly intended to be used as proxy <span class="built_in">command</span> of OpenSSH.</span><br></pre></td></tr></table></figure></li>
<li>Edit ~/.ssh/config and add the following lines (modify to suit your needs): <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># not using proxy on lan</span></span><br><span class="line">Host 172.16.*</span><br><span class="line">ProxyCommand connect-proxy %h %p</span><br><span class="line">Host localhost</span><br><span class="line">ProxyCommand connect-proxy %h %p</span><br><span class="line"></span><br><span class="line"><span class="comment"># mandatory to access the internet</span></span><br><span class="line">Host *</span><br><span class="line">ProxyCommand connect-proxy -H proxyserver:proxyport %h %p</span><br></pre></td></tr></table></figure></li>
</ul>
<p>Now when you run ssh to connect to servers not on your LAN, connect-proxy is used along transparently.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://keli.hu/blog/using-libglade-support-in-lablgtk2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Keli">
      <meta itemprop="description" content="Remember to always be yourself. Unless you suck.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keli's Mumbo Jumbo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/using-libglade-support-in-lablgtk2/" class="post-title-link" itemprop="url">Using LibGlade support in LablGtk2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2005-12-14 16:24:00" itemprop="dateCreated datePublished" datetime="2005-12-14T16:24:00+08:00">2005-12-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I played with the following glade example files from LablGtk2:</p>
<ol type="1">
<li>gladecalc.ml</li>
<li>project2.glade</li>
</ol>
<p>You can find them from the liblablgtk2-ocaml-dev package if you are using Debian Gnu/Linux Sid.</p>
<p>To run the gladecalc.ml you should do the following first:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lablgladecc2 -embed project2.glade &gt; project2.ml</span><br></pre></td></tr></table></figure>
<p>then you can run gladecalc.ml:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lablgtk2 -thread gladecalc.ml</span><br></pre></td></tr></table></figure>
<p>This might not be very useful if you want to deploy your own LablGtk2 applications and the clients don't have OCaml toplevel installed: lablgtk2 is just a shell script wrapped around OCaml toplevel after all.</p>
<p>In our case, to compile gladecalc.ml into a native executable, we should first change the code a little bit. The #use directive in line 6 of gladecalc.ml works only for OCaml toplevel, so comment it out and add a new line:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(* #use &quot;project2.ml&quot;;; *)</span></span><br><span class="line"><span class="keyword">open</span> <span class="type">Project2</span></span><br></pre></td></tr></table></figure>
<p>then use ocamlopt to compile:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ocamlopt -I +lablgtk2 lablgtk.cmxa lablglade.cmxa gtkInit.cmx project2.ml gladecalc.ml -o gladecalc</span><br></pre></td></tr></table></figure>
<p>this produces a single executable "gladecalc" without OCaml dependencies.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Keli</p>
  <div class="site-description" itemprop="description">Remember to always be yourself. Unless you suck.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-battery-full"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Keli</span>
</div>

        




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey   : 'AIzaSyDpgs5LhO97ETpv7wbxexK1McV2E9AlkTA',
      projectId: 'keli-personal'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page
      return doc.get().then(d => {
        var count = 0;
        if (!d.exists) { // Has no data, initialize count
          if (increaseCount) {
            doc.set({
              count: 1
            });
            count = 1;
          }
        } else { // Has data
          count = d.data().count;
          if (increaseCount) {
            // If first view this article
            doc.set({ // Increase count
              count: count + 1
            });
            count++;
          }
        }

        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      }
    }
  </script>
  <script>
    (function() {
      var db = firebase.firestore();
      var articles = db.collection('articles');

      if (CONFIG.page.isPost) { // Is article page
        var title = document.querySelector('.post-title').innerText.trim();
        var doc = articles.doc(title);
        var increaseCount = CONFIG.hostname === location.hostname;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) { // Is index page
        var promises = [...document.querySelectorAll('.post-title')].map(element => {
          var title = element.innerText.trim();
          var doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          var metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>




      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'default',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

</body>
</html>
